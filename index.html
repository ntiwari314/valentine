<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рд╣рдорд╛рд░рд╛ рд╡реИрд▓реЗрдВрдЯрд╛рдЗрди | рд╣рдореЗрд╢рд╛ рдХреЗ рд▓рд┐рдП рд╕рд╛рде</title>
</head>
<body id="body" style="margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif, 'Noto Sans Devanagari'; background: #fff5f7; color: #4a0e0e; overflow-x: hidden; transition: background 0.5s ease;">

    <!-- APP STATE & LOGIC INJECTOR -->
    <script>
        // --- GLOBAL STATE (HARDCODED VALUES) ---
        const state = {
            nameA: "рдЦреБрд╢реА", // Female name
            nameB: "рдирд┐рддрд┐рди",  // Male name
            customMessage: "рдЦреБрд╢реА, рдореЗрд░рд╛ рддреБрдорд╕реЗ рдпреЗ рд╡рд╛рджрд╛ рд╣реИ рдХрд┐ рдЪрд╛рд╣реЗ рд╡рдХреНрдд рдХреИрд╕рд╛ рднреА рд╣реЛ, рдореИрдВ рдХрднреА рддреБрдореНрд╣рд╛рд░рд╛ рд╕рд╛рде рдирд╣реАрдВ рдЫреЛрдбрд╝реВрдБрдЧрд╛ред рддреБрдо рдореЗрд░реА рдЬрд╝рд┐рдиреНрджрдЧреА рдХреА рд╕рдмрд╕реЗ рдмрдбрд╝реА рдЦреБрд╢реА рд╣реЛ рдФрд░ рдореИрдВ рдорд░рддреЗ рджрдо рддрдХ рд╕рд┐рд░реНрдл рддреБрдореНрд╣рд╛рд░рд╛ рдмрдирдХрд░ рд░рд╣реВрдБрдЧрд╛ред рд╣рдо рд╕рд╛рде рд╣реИрдВ, рдФрд░ рд╣рдореЗрд╢рд╛ рд╕рд╛рде рд░рд╣реЗрдВрдЧреЗред", 
            theme: 'romantic', 
            particlesEnabled: true,
            soundEnabled: true,
            reduceMotion: false,
            score: 0,
            emojiIntensity: 1.0,
            isTogether: false,
            appId: 'val-2025'
        };

        const themes = {
            romantic: {
                bg: 'linear-gradient(135deg, #fff5f7 0%, #ffe3e8 100%)',
                primary: '#ff4d6d',
                secondary: '#ff758f',
                accent: '#c9184a',
                text: '#590d22',
                glass: 'rgba(255, 255, 255, 0.8)'
            }
        };

        // --- KEYFRAMES & GLOBAL STYLES ---
        const styleTag = document.createElement('style');
        styleTag.innerHTML = `
            @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;700&display=swap');
            @keyframes float { 0% { transform: translateY(0px) rotate(0deg); opacity: 0; } 50% { opacity: 0.8; } 100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; } }
            @keyframes pulse { 0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 77, 109, 0.7); } 70% { transform: scale(1.05); box-shadow: 0 0 0 15px rgba(255, 77, 109, 0); } 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 77, 109, 0); } }
            @keyframes slideIn { from { transform: translateX(120%); } to { transform: translateX(0); } }
            @keyframes glow { 0%, 100% { border-color: var(--primary); box-shadow: 0 0 5px var(--primary); } 50% { border-color: var(--accent); box-shadow: 0 0 20px var(--accent); } }
            .reveal { opacity: 0; transition: all 0.8s ease-out; transform: translateY(30px); }
            .reveal.active { opacity: 1; transform: translateY(0); }
            .glass { backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); }
            .no-select { -webkit-user-select: none; user-select: none; }
            html { scroll-behavior: smooth; }
            body { font-family: 'Noto Sans Devanagari', sans-serif; }
        `;
        document.head.appendChild(styleTag);

        const $ = (id) => document.getElementById(id);

        const playTone = (freq, type = 'sine', duration = 0.2) => {
            if (!state.soundEnabled) return;
            try {
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.type = type;
                osc.frequency.setValueAtTime(freq, ctx.currentTime);
                gain.gain.setValueAtTime(0.1, ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + duration);
                osc.connect(gain);
                gain.connect(ctx.destination);
                osc.start();
                osc.stop(ctx.currentTime + duration);
            } catch(e) {}
        };

        const showToast = (msg) => {
            const toast = document.createElement('div');
            toast.innerText = msg;
            Object.assign(toast.style, {
                position: 'fixed', bottom: '20px', right: '20px', padding: '12px 24px',
                background: themes[state.theme].primary, color: 'white', borderRadius: '50px',
                boxShadow: '0 4px 15px rgba(0,0,0,0.2)', zIndex: '9999',
                animation: 'slideIn 0.3s ease-out', fontWeight: 'bold'
            });
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.style.transform = 'translateX(150%)';
                toast.style.transition = '0.5s';
                setTimeout(() => toast.remove(), 500);
            }, 3000);
        };

        const confettiBurst = (x, y) => {
            const emojis = ['ЁЯТЦ', 'тЬи', 'ЁЯМ╣', 'ЁЯТШ', 'ЁЯНл', 'ЁЯМ╕'];
            for (let i = 0; i < 20; i++) {
                const el = document.createElement('div');
                el.innerText = emojis[Math.floor(Math.random() * emojis.length)];
                Object.assign(el.style, {
                    position: 'fixed', left: x + 'px', top: y + 'px',
                    pointerEvents: 'none', zIndex: '10000', fontSize: '24px',
                    transition: 'all 1s cubic-bezier(0.1, 0.5, 0.5, 1)'
                });
                document.body.appendChild(el);
                const tx = (Math.random() - 0.5) * 400;
                const ty = (Math.random() - 0.5) * 400;
                requestAnimationFrame(() => {
                    el.style.transform = `translate(${tx}px, ${ty}px) rotate(${Math.random() * 360}deg)`;
                    el.style.opacity = '0';
                });
                setTimeout(() => el.remove(), 1000);
            }
        };

        const createParticles = () => {
            if (!state.particlesEnabled || state.reduceMotion) return;
            const container = $('particle-container');
            const particle = document.createElement('div');
            const isHeart = Math.random() > 0.3;
            particle.innerHTML = isHeart ? 'тЭдя╕П' : 'тЬи';
            Object.assign(particle.style, {
                position: 'fixed', bottom: '-50px', left: Math.random() * 100 + 'vw',
                fontSize: (10 + Math.random() * 20) + 'px', opacity: '0',
                animation: `float ${5 + Math.random() * 5}s linear forwards`,
                zIndex: '0', pointerEvents: 'none'
            });
            container.appendChild(particle);
            setTimeout(() => particle.remove(), 10000);
        };

        const setTheme = (themeName) => {
            state.theme = themeName;
            const t = themes[themeName];
            document.body.style.background = t.bg;
            document.body.style.color = t.text;
            const bgElements = document.querySelectorAll('.theme-bg');
            bgElements.forEach(el => el.style.background = t.primary);
        };
    </script>

    <!-- FLOATING BACKGROUND -->
    <div id="particle-container" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0;"></div>

    <!-- NAVIGATION -->
    <nav id="navbar" class="glass" style="position: fixed; top: 0; width: 100%; height: 60px; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; z-index: 1000; box-sizing: border-box; transition: 0.3s; border-bottom: 1px solid rgba(255,255,255,0.2);">
        <div style="font-weight: bold; font-size: 1.2rem; cursor: pointer;" onclick="window.scrollTo(0,0)">
            ЁЯТЦ <span id="nav-names">рд╣рдо</span>
        </div>
        <div style="display: flex; gap: 15px; font-size: 0.9rem;">
            <a href="#about" style="text-decoration: none; color: inherit;">рдХрд╣рд╛рдиреА</a>
            <a href="#games" style="text-decoration: none; color: inherit;">рдЦреЗрд▓</a>
            <a href="#note" style="text-decoration: none; color: inherit;">рд╡рд╛рджреЗ</a>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main style="max-width: 1000px; margin: 0 auto; padding: 80px 20px;">
        
        <!-- HERO -->
        <section id="hero" class="reveal active" style="text-align: center; padding: 60px 0;">
            <div style="font-size: 4rem; margin-bottom: 10px;">ЁЯТЭ</div>
            <h1 id="hero-title" style="font-size: 3rem; margin: 0; line-height: 1.1;">рдореЗрд░реЗ рд╡реИрд▓реЗрдВрдЯрд╛рдЗрди рдХреЗ рд▓рд┐рдП</h1>
            <p id="hero-subtext" style="font-size: 1.2rem; opacity: 0.8; max-width: 600px; margin: 20px auto;">рддреБрдореНрд╣рд╛рд░реЗ рд╕рд╛рде рдмрд┐рддрд╛рдпрд╛ рд╣рд░ рдкрд▓ рдПрдХ рдЦреВрдмрд╕реВрд░рдд рд╡рд╛рджрд╛ рд╣реИред</p>
            <div style="display: flex; justify-content: center; gap: 15px; margin-top: 30px;">
                <button onclick="openModal()" class="theme-bg" style="padding: 15px 30px; border: none; border-radius: 50px; color: white; font-weight: bold; cursor: pointer; animation: pulse 2s infinite;">рдкреНрд░реЗрдо рдкрддреНрд░ рдЦреЛрд▓реЗрдВ ЁЯТМ</button>
                <button onclick="surpriseBurst(event)" style="padding: 15px 30px; border: 2px solid #ff4d6d; border-radius: 50px; background: transparent; font-weight: bold; cursor: pointer;">рд╕рд░рдкреНрд░рд╛рдЗрдЬ ЁЯОЙ</button>
            </div>
        </section>

        <!-- PHOTO SECTION -->
        <section id="photos" class="reveal" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; padding: 40px 0;">
            <div id="frameA" class="glass" style="padding: 20px; border-radius: 15px; border: 3px dashed #ff4d6d; text-align: center; animation: glow 3s infinite;">
                <h4 id="labelA" style="margin-top: 0;">рдЦреБрд╢реА</h4>
                <div id="previewA" style="width: 100%; aspect-ratio: 1; background: #eee; border-radius: 10px; display: flex; align-items: center; justify-content: center; overflow: hidden; margin-bottom: 15px; position: relative;">
                    <span style="font-size: 3rem;">ЁЯСд</span>
                </div>
                <button onclick="$('uploadA').click()" style="background: #eee; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; font-size: 0.8rem;">рдлреЛрдЯреЛ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ</button>
                <input type="file" id="uploadA" hidden onchange="handleImage(this, 'previewA')">
            </div>

            <div id="frameB" class="glass" style="padding: 20px; border-radius: 15px; border: 3px dashed #ff4d6d; text-align: center; animation: glow 3s infinite 1.5s;">
                <h4 id="labelB" style="margin-top: 0;">рдирд┐рддрд┐рди</h4>
                <div id="previewB" style="width: 100%; aspect-ratio: 1; background: #eee; border-radius: 10px; display: flex; align-items: center; justify-content: center; overflow: hidden; margin-bottom: 15px; position: relative;">
                    <span style="font-size: 3rem;">ЁЯСд</span>
                </div>
                <button onclick="$('uploadB').click()" style="background: #eee; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; font-size: 0.8rem;">рдлреЛрдЯреЛ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ</button>
                <input type="file" id="uploadB" hidden onchange="handleImage(this, 'previewB')">
            </div>
        </section>

        <!-- ABOUT / MESSAGE -->
        <section id="about" class="reveal" style="padding: 60px 0; text-align: center;">
            <h2 style="font-size: 2rem;">рд╣рдорд╛рд░реА рдХрд╣рд╛рдиреА рдФрд░ рд╡рд╛рджрд╛</h2>
            <div style="font-size: 1.1rem; line-height: 1.8; max-width: 700px; margin: 0 auto;">
                <p id="displayMsg">рд╕рдВрджреЗрд╢ рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ...</p>
                <blockquote style="font-style: italic; border-left: 4px solid #ff4d6d; padding-left: 20px; margin: 30px auto; text-align: left; background: rgba(255, 77, 109, 0.05); padding: 20px;">
                    "рд╣рд╛рдереЛрдВ рдореЗрдВ рд╣рд╛рде рд░рд╣реЗ, рд╣рд░ рдЬрдиреНрдо рдореЗрдВ рддреЗрд░рд╛ рд╕рд╛рде рд░рд╣реЗред рд╡рд╛рджрд╛ рд╣реИ рдХрд┐ рд╡рдХреНрдд рдЪрд╛рд╣реЗ рдХрд┐рддрдирд╛ рднреА рдмрджрд▓ рдЬрд╛рдП, рд╣рдорд╛рд░рд╛ рдкреНрдпрд╛рд░ рдХрднреА рдирд╣реАрдВ рдмрджрд▓реЗрдЧрд╛ред"
                </blockquote>
            </div>
        </section>

        <!-- TIMELINE -->
        <section id="timeline" class="reveal" style="padding: 60px 0;">
            <h2 style="text-align: center;">рдпрд╛рджрдЧрд╛рд░ рд▓рдореНрд╣реЗрдВ</h2>
            <div style="display: grid; gap: 20px;">
                <div class="glass" style="padding: 20px; border-radius: 10px; cursor: pointer;" onclick="toggleExpand(this)">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <strong>тЬи рдкрд╣рд▓реА рдореБрд▓рд╛рдХрд╛рдд</strong>
                        <span>v</span>
                    </div>
                    <div style="display: none; padding-top: 15px; font-size: 0.9rem; border-top: 1px solid #eee; margin-top: 10px;">
                        рд╡реЛ рджрд┐рди рдЬрдм рд╕рдм рдХреБрдЫ рдмрджрд▓ рдЧрдпрд╛ред рдореБрдЭреЗ рдЖрдЬ рднреА рддреБрдореНрд╣рд╛рд░реА рдЖрдБрдЦреЛрдВ рдХреА рд╡реЛ рдЪрдордХ рдФрд░ рдореЗрд░реА рдзрдбрд╝рдХрдиреЛрдВ рдХрд╛ рддреЗрдЬрд╝ рд╣реЛрдирд╛ рдпрд╛рдж рд╣реИред
                    </div>
                </div>
                <div class="glass" style="padding: 20px; border-radius: 10px; cursor: pointer;" onclick="toggleExpand(this)">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <strong>ЁЯдЭ рдЙрдореНрд░ рднрд░ рдХрд╛ рд╕рд╛рде</strong>
                        <span>v</span>
                    </div>
                    <div style="display: none; padding-top: 15px; font-size: 0.9rem; border-top: 1px solid #eee; margin-top: 10px;">
                        рдЬрдм рд╣рдордиреЗ рддрдп рдХрд┐рдпрд╛ рдХрд┐ рдЕрдм рд╕реЗ рд╣рд░ рд░рд╛рд╕реНрддрд╛ рд╕рд╛рде рддрдп рдХрд░реЗрдВрдЧреЗред рдЪрд╛рд╣реЗ рдзреВрдк рд╣реЛ рдпрд╛ рдЫрд╛рдБрд╡, рд╣рдо рдкреАрдЫреЗ рдирд╣реАрдВ рд╣рдЯреЗрдВрдЧреЗред
                    </div>
                </div>
            </div>
        </section>

        <!-- GAMES SECTION -->
        <section id="games" class="reveal" style="padding: 60px 0;">
            <h2 style="text-align: center;">рд╕рд╛рде рдЦреЗрд▓реЗрдВ</h2>
            
            <div class="glass" style="padding: 30px; border-radius: 20px; text-align: center; position: relative; overflow: hidden; margin-bottom: 40px;">
                <h3>рд╣рдореЗрдВ рдХрд░реАрдм рд▓рд╛рдПрдВ ЁЯТШ</h3>
                <p style="font-size: 0.9rem; margin-bottom: 20px;">рджреЛрдиреЛрдВ рдлреЛрдЯреЛ рдХреЛ рдбреНрд░реИрдЧ рдХрд░реЗрдВ рдЬрдм рддрдХ рд╡реЛ рдорд┐рд▓ рди рдЬрд╛рдПрдВ!</p>
                <div id="game-canvas" style="height: 350px; background: rgba(0,0,0,0.03); border-radius: 15px; position: relative; touch-action: none;">
                    <div id="cardA" class="no-select" style="width: 100px; height: 100px; background: #fff; border: 4px solid #ff4d6d; border-radius: 10px; position: absolute; top: 50px; left: 50px; cursor: grab; z-index: 2; overflow: hidden; display: flex; align-items: center; justify-content: center; font-size: 2rem;">ЁЯСд</div>
                    <div id="cardB" class="no-select" style="width: 100px; height: 100px; background: #fff; border: 4px solid #7000ff; border-radius: 10px; position: absolute; bottom: 50px; right: 50px; cursor: grab; z-index: 2; overflow: hidden; display: flex; align-items: center; justify-content: center; font-size: 2rem;">ЁЯСд</div>
                    <div id="match-badge" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 5; font-size: 3rem;">
                        рд╣рдореЗрд╢рд╛ рдХреЗ рд▓рд┐рдП рдПрдХ! ЁЯТШ
                    </div>
                </div>
            </div>
        </section>

        <!-- PROMISE GENERATOR -->
        <section id="note" class="reveal" style="padding: 60px 0; text-align: center;">
            <div class="glass" style="padding: 40px; border-radius: 30px;">
                <h2>рд╣рдорд╛рд░реЗ рд╕рд╛рдд рд╡рдЪрди ЁЯТМ</h2>
                <div id="generated-note" style="min-height: 100px; font-size: 1.2rem; padding: 20px; border: 1px solid rgba(0,0,0,0.1); border-radius: 15px; margin-bottom: 20px; background: white;">
                    рдПрдХ рд╡рд╛рджрд╛ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдмрдЯрди рджрдмрд╛рдПрдВ...
                </div>
                <div style="display: flex; justify-content: center; gap: 10px;">
                    <button onclick="generateNote()" class="theme-bg" style="padding: 12px 24px; border: none; border-radius: 50px; color: white; font-weight: bold; cursor: pointer;">рдирдпрд╛ рд╡рд╛рджрд╛ рдХрд░реЗрдВ</button>
                    <button onclick="copyNote()" style="padding: 12px 24px; border: 1px solid #ccc; border-radius: 50px; background: white; cursor: pointer;">рдХреЙрдкреА рдХрд░реЗрдВ</button>
                </div>
            </div>
        </section>

    </main>

    <!-- FOOTER -->
    <footer style="padding: 60px 20px; text-align: center; border-top: 1px solid rgba(0,0,0,0.05);">
        <p>&copy; 2025 <span class="val-name-a">рдЦреБрд╢реА</span> рдФрд░ <span class="val-name-b">рдирд┐рддрд┐рди</span> рдХрд╛ рдЕрдЯреВрдЯ рдкреНрдпрд╛рд░</p>
    </footer>

    <!-- MODAL -->
    <div id="modal-overlay" onclick="closeModal()" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; display: none; align-items: center; justify-content: center;">
        <div id="modal-content" onclick="event.stopPropagation()" class="glass" style="width: 90%; max-width: 500px; padding: 40px; border-radius: 20px; background: white; position: relative; transform: scale(0.8); transition: 0.3s; opacity: 0;">
            <button onclick="closeModal()" style="position: absolute; top: 15px; right: 15px; border: none; background: none; font-size: 1.2rem; cursor: pointer;">тЬХ</button>
            <h2 id="modal-title" style="margin-top: 0;">рдореЗрд░реА рдкреНрдпрд╛рд░реА <span class="val-name-a">рдЦреБрд╢реА</span></h2>
            <div id="typed-text" style="line-height: 1.6; font-size: 1.1rem; white-space: pre-wrap;"></div>
            <div style="margin-top: 30px; text-align: right; font-weight: bold;">рд╕рд┐рд░реНрдл рддреБрдореНрд╣рд╛рд░рд╛, <br><span class="val-name-b">рдирд┐рддрд┐рди</span></div>
        </div>
    </div>

    <!-- JS SCRIPTS -->
    <script>
        window.onload = () => {
            initUI();
            setupDraggable('cardA');
            setupDraggable('cardB');
            setInterval(createParticles, 300);
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('active');
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
        };

        function initUI() {
            setTheme(state.theme);
            updateNames();
            $('displayMsg').innerText = state.customMessage;
        }

        function updateNames() {
            document.querySelectorAll('.val-name-a').forEach(el => el.innerText = state.nameA);
            document.querySelectorAll('.val-name-b').forEach(el => el.innerText = state.nameB);
            $('nav-names').innerText = `${state.nameA} рдФрд░ ${state.nameB}`;
            $('hero-title').innerText = `рдореЗрд░реА ${state.nameA} рдХреЗ рд▓рд┐рдП`;
            $('labelA').innerText = state.nameA;
            $('labelB').innerText = state.nameB;
        }

        function handleImage(input, previewId) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const prev = $(previewId);
                    prev.innerHTML = '';
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    Object.assign(img.style, { width: '100%', height: '100%', objectFit: 'cover' });
                    prev.appendChild(img);
                    
                    const cardId = previewId === 'previewA' ? 'cardA' : 'cardB';
                    const card = $(cardId);
                    card.innerHTML = '';
                    const cardImg = img.cloneNode();
                    card.appendChild(cardImg);
                    
                    showToast("рдлреЛрдЯреЛ рдмрджрд▓ рдЧрдИ! ЁЯУ╕");
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function openModal() {
            const overlay = $('modal-overlay');
            const content = $('modal-content');
            overlay.style.display = 'flex';
            setTimeout(() => {
                content.style.opacity = '1';
                content.style.transform = 'scale(1)';
            }, 10);
            
            const text = state.customMessage;
            const target = $('typed-text');
            target.innerHTML = '';
            let i = 0;
            const timer = setInterval(() => {
                target.innerHTML += text.charAt(i);
                i++;
                if (i >= text.length) clearInterval(timer);
            }, 30);
            playTone(440, 'sine', 0.1);
        }

        function closeModal() {
            $('modal-overlay').style.display = 'none';
        }

        function surpriseBurst(e) {
            confettiBurst(e.clientX, e.clientY);
            playTone(523.25, 'triangle', 0.3);
            showToast("рд╣рдореЗрд╢рд╛ рд╕рд╛рде рд░рд╣реЗрдВрдЧреЗ! тЬи");
        }

        function setupDraggable(id) {
            const el = $(id);
            let active = false, currentX = 0, currentY = 0, initialX, initialY, xOffset = 0, yOffset = 0;

            const dragStart = (e) => {
                const ev = e.type === "touchstart" ? e.touches[0] : e;
                initialX = ev.clientX - xOffset;
                initialY = ev.clientY - yOffset;
                if (e.target === el || el.contains(e.target)) {
                    active = true;
                    el.style.cursor = 'grabbing';
                }
            };
            const dragEnd = () => {
                initialX = currentX; initialY = currentY;
                active = false; el.style.cursor = 'grab';
                checkCollision();
            };
            const drag = (e) => {
                if (active) {
                    e.preventDefault();
                    const ev = e.type === "touchmove" ? e.touches[0] : e;
                    currentX = ev.clientX - initialX;
                    currentY = ev.clientY - initialY;
                    xOffset = currentX; yOffset = currentY;
                    el.style.transform = `translate3d(${currentX}px, ${currentY}px, 0)`;
                }
            };
            el.addEventListener("touchstart", dragStart, false);
            document.addEventListener("touchend", dragEnd, false);
            document.addEventListener("touchmove", drag, false);
            el.addEventListener("mousedown", dragStart, false);
            document.addEventListener("mouseup", dragEnd, false);
            document.addEventListener("mousemove", drag, false);
        }

        function checkCollision() {
            const a = $('cardA').getBoundingClientRect();
            const b = $('cardB').getBoundingClientRect();
            const dist = Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));
            if (dist < 80 && !state.isTogether) {
                state.isTogether = true;
                $('match-badge').style.transform = 'translate(-50%, -50%) scale(1.5)';
                playTone(659.25, 'sine', 0.5);
                confettiBurst(a.x + 50, a.y + 50);
                setTimeout(() => {
                    $('match-badge').style.transform = 'translate(-50%, -50%) scale(0)';
                    state.isTogether = false;
                }, 3000);
            }
        }

        const promises = [
            "рдореИрдВ рд╡рд╛рджрд╛ рдХрд░рддрд╛ рд╣реВрдБ рдХрд┐ рдореИрдВ рдХрднреА рддреБрдореНрд╣рд╛рд░рд╛ рд╣рд╛рде рдирд╣реАрдВ рдЫреЛрдбрд╝реВрдБрдЧрд╛ред",
            "рд╣рдорд╛рд░рд╛ рдкреНрдпрд╛рд░ рд╡рдХреНрдд рдХреЗ рд╕рд╛рде рдФрд░ рднреА рдЧрд╣рд░рд╛ рд╣реЛрддрд╛ рдЬрд╛рдПрдЧрд╛ред",
            "рдмреБрдврд╝рд╛рдкреЗ рддрдХ рд╣рдо рдРрд╕реЗ рд╣реА рдПрдХ рджреВрд╕рд░реЗ рдХрд╛ рд╣рд╛рде рдерд╛рдореЗ рд░рд╣реЗрдВрдЧреЗред",
            "рддреБрдо рдореЗрд░реА рдкрд╣рд▓реА рдФрд░ рдЖрдЦрд┐рд░реА рдореЛрд╣рдмреНрдмрдд рд╣реЛ рдФрд░ рд░рд╣реЛрдЧреАред"
        ];

        function generateNote() {
            const note = promises[Math.floor(Math.random() * promises.length)];
            $('generated-note').innerText = note;
            playTone(329.63, 'sine', 0.1);
        }

        function copyNote() {
            const text = $('generated-note').innerText;
            const temp = document.createElement('textarea');
            temp.value = text;
            document.body.appendChild(temp);
            temp.select();
            document.execCommand('copy');
            document.body.removeChild(temp);
            showToast("рдХреЙрдкреА рд╣реЛ рдЧрдпрд╛! ЁЯУЛ");
        }

        function toggleExpand(el) {
            const content = el.children[1];
            const arrow = el.querySelector('span');
            if (content.style.display === 'none') {
                content.style.display = 'block'; arrow.innerText = '^';
            } else {
                content.style.display = 'none'; arrow.innerText = 'v';
            }
        }
    </script>
</body>
</html>
